accounting = ligo.dev.o4.cbc.pe.bilby

label = pocomc_pp_test
outdir = outdir_pocomc_pp_test_v1.2.4_boundary_conditions_priors

detectors = [H1, L1, V1]
duration = 4
sampling-frequency=2048.0

prior-file = bbh_priors.prior
deltaT = 0.2

phase-marginalization=False
distance-marginalization=True
time-marginalization=True

gaussian-noise = True
generation-seed = 1234
injection = True
injection-file = bbh_injections_seed_1234.json
n-simulation = 100
injection-waveform-approximant = IMRPhenomXPHM
waveform-approximant = IMRPhenomXPHM

request-cpus = 8
request-memory = 4.0

sampler = pocomc
sampler-kwargs = {
    flow="maf6",
    n_effective=1000,
    n_active=500,
    n_total=10000,
    n_steps=50,
    n_max_steps=500,
    train_config={'patience': 30},
    save_every=2,
}
