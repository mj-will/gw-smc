accounting = ligo.dev.o4.cbc.pe.bilby

label = pocomc_basic_test
outdir = outdir_pocomc_basic_test_settings_v1.2.2_patience_30/

detectors = [H1, L1, V1]
duration = 4
sampling-frequency=2048.0

prior-dict = {
    chirp_mass = Uniform(name='chirp_mass', minimum=25.0, maximum=35.0)
    mass_ratio =  Uniform(name='mass_ratio', minimum=0.125, maximum=1)
    a_1 = Uniform(name='a_1', minimum=0, maximum=0.99)
    a_2 = Uniform(name='a_2', minimum=0, maximum=0.99)
    tilt_1 = Sine(name='tilt_1')
    tilt_2 = Sine(name='tilt_2')
    phi_12 = Uniform(name='phi_12', minimum=0, maximum=2 * np.pi)
    phi_jl = Uniform(name='phi_jl', minimum=0, maximum=2 * np.pi)
    luminosity_distance = bilby.gw.prior.UniformSourceFrame(name='luminosity_distance', minimum=100, maximum=2000)
    dec = Cosine(name='dec')
    ra = Uniform(name='ra', minimum=0, maximum=2 * np.pi)
    theta_jn = Sine(name='theta_jn')
    psi =  Uniform(name='psi', minimum=0, maximum=np.pi)
    phase =  Uniform(name='phase', minimum=0, maximum=2 * np.pi)
}
deltaT = 0.2

phase-marginalization=False
distance-marginalization=True
time-marginalization=True

gaussian-noise = True
generation-seed = 1234
injection = True
n-simulation = 1
injection-waveform-approximant = IMRPhenomXPHM

waveform-approximant = IMRPhenomXPHM

request-cpus = 8
request-memory = 4.0

sampler = pocomc
sampler-kwargs = {
    flow="nsf6",
    n_effective=1000,
    n_active=500,
    n_total=10000,
    n_steps=20,
    n_max_steps=500,
    train_config={patience=30},
}
