accounting = ligo.dev.o4.cbc.pe.bilby

label = pocomc_reparam_example
outdir = outdir_pocomc_reparam_example

detectors = [H1, L1]
duration = 8
sampling-frequency=2048.0

prior-dict = {
    chirp_mass = Uniform(name='chirp_mass', minimum=25.0, maximum=35.0)
    mass_ratio =  Uniform(name='mass_ratio', minimum=0.125, maximum=1)
    a_1 = Uniform(name='a_1', minimum=0, maximum=0.99)
    a_2 = Uniform(name='a_2', minimum=0, maximum=0.99)
    tilt_1 = Sine(name='tilt_1')
    tilt_2 = Sine(name='tilt_2')
    phi_12 = Uniform(name='phi_12', minimum=0, maximum=2 * np.pi, boundary="periodic")
    phi_jl = Uniform(name='phi_jl', minimum=0, maximum=2 * np.pi, boundary="periodic")
    luminosity_distance = bilby.gw.prior.UniformSourceFrame(name='luminosity_distance', minimum=100, maximum=2000)
    ra = Uniform(name='ra', minimum=0, maximum=2 * np.pi, boundary="periodic")
    dec = Cosine(name='dec')
    theta_jn = Sine(name='theta_jn')
    psi =  Uniform(name='psi', minimum=0, maximum=np.pi, boundary="periodic")
    delta_phase = Uniform(name='delta_phase', minimum=0, maximum=2 * np.pi, boundary="periodic")
}
# Width of the tc prior
deltaT = 0.2

# Set reference frame based on the vector between L1 and H1
reference-frame = "L1H1"
# Set time to loudest detector
time-reference = L1

plot-corner = True

phase-marginalization = False
distance-marginalization = True
time-marginalization = False

gaussian-noise = True
generation-seed = 631667
injection = True
n-simulation = 1
injection-waveform-approximant = IMRPhenomXPHM

waveform-approximant = IMRPhenomXPHM

request-cpus = 16
request-memory = 4.0

sampler = pocomc
sampler-kwargs = {
    n_active=500,
    n_effective=1000,
    n_total=10000,
    n_steps=50,
    n_max_steps=500,
    flow="maf6",
}
